
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>galaxy_dive.analyze_data.ahf_updater module &#8212; galaxy-dive 0.8.1 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">galaxy-dive 0.8.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-galaxy_dive.analyze_data.ahf_updater">
<span id="galaxy-dive-analyze-data-ahf-updater-module"></span><h1>galaxy_dive.analyze_data.ahf_updater module<a class="headerlink" href="#module-galaxy_dive.analyze_data.ahf_updater" title="Permalink to this headline">¶</a></h1>
<p>Tools for modifying halo data output files.</p>
<p>&#64;author: Zach Hafen
&#64;contact: <a class="reference external" href="mailto:zachary&#46;h&#46;hafen&#37;&#52;&#48;gmail&#46;com">zachary<span>&#46;</span>h<span>&#46;</span>hafen<span>&#64;</span>gmail<span>&#46;</span>com</a>
&#64;status: Development</p>
<dl class="class">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater">
<em class="property">class </em><code class="descclassname">galaxy_dive.analyze_data.ahf_updater.</code><code class="descname">HaloUpdater</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="galaxy_dive.analyze_data.halo_data.html#galaxy_dive.analyze_data.halo_data.HaloData" title="galaxy_dive.analyze_data.halo_data.HaloData"><code class="xref py py-class docutils literal notranslate"><span class="pre">galaxy_dive.analyze_data.halo_data.HaloData</span></code></a></p>
<p>Class for updating Halo data (smoothing, adding in additional columns, etc)</p>
<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_accurate_redshift">
<code class="descname">get_accurate_redshift</code><span class="sig-paren">(</span><em>metafile_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.get_accurate_redshift"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_accurate_redshift" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a better values of the redshift than what’s stored in the Halo filename, by loading them from an external file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The directory the snapshot_times are stored in.</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Modifies:</dt>
<dd>self.mtree_halos (dict of pd.DataFrames): Updates the redshift column</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_analytic_concentration">
<code class="descname">get_analytic_concentration</code><span class="sig-paren">(</span><em>metafile_dir</em>, <em>type_of_halo_id='merger_tree'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.get_analytic_concentration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_analytic_concentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Get analytic values for the halo concentration, using colossus, Benedikt Diemer’s cosmology code
( <a class="reference external" href="https://bitbucket.org/bdiemer/colossus">https://bitbucket.org/bdiemer/colossus</a> ; <a class="reference external" href="http://www.benediktdiemer.com/code/colossus/">http://www.benediktdiemer.com/code/colossus/</a> ).</p>
<dl class="docutils">
<dt>Assumptions:</dt>
<dd><ul class="first last simple">
<li>We’re using the default formula of Diemer&amp;Kravtstov15</li>
<li>We’re using the Bryan&amp;Norman1998 version of the virial radius.</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The directory the snapshot_times are stored in.</li>
<li><strong>type_of_halo_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – ‘merger_tree’ if the halo id is a merger tree halo id.
‘halos’ if the halo id is a <a href="#id1"><span class="problematic" id="id2">*</span></a>.AHF_halos halo id.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Returns</dt>
<dd>c_vir (np.array of floats): The concentration, defined as R_vir/r_scale.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_average_quantity_inside_galaxy">
<code class="descname">get_average_quantity_inside_galaxy</code><span class="sig-paren">(</span><em>data_key</em>, <em>simulation_data_dir</em>, <em>ptype</em>, <em>galaxy_cut</em>, <em>length_scale</em>, <em>weight_data_key='M'</em>, <em>fill_value=nan</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.get_average_quantity_inside_galaxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_average_quantity_inside_galaxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mass inside galaxy_cut*length_scale for each Halo halo.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Data key for the quantity to get the average of.</li>
<li><strong>simulation_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Directory containing the raw particle data.</li>
<li><strong>ptype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – What particle type to get the mass for.</li>
<li><strong>galaxy_cut</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo within which to get the mass.</li>
<li><strong>length_scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo within which to get the mass.</li>
<li><strong>weight_data_key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Data key for the weight to use when averaging.</li>
<li><strong>fill_value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – What value to use when the average quantity inside the galaxy is not resolved.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">average_quantity_inside_galaxy[i] is the average value of the requested quantity for particle type ptype
inside galaxy_cut*length scale around a galaxy.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">average_quantity_inside_galaxy (np.ndarray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_circular_velocity">
<code class="descname">get_circular_velocity</code><span class="sig-paren">(</span><em>galaxy_cut, length_scale, metafile_dir, ptypes=['gas', 'DM', 'lowresDM', 'star']</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.get_circular_velocity"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_circular_velocity" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the circular velocity at galaxy_cut*length_scale.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>galaxy_cut</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo within which to get the mass.</li>
<li><strong>length_scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo within which to get the mass.</li>
<li><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Directory containing metafile data, for getting out the redshift given a snapshot.</li>
<li><strong>ptypes</strong> (<em>list of strs</em>) – Particle types to count the mass inside the halo of.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><dl class="docutils">
<dt>v_circ (np.ndarray)</dt>
<dd><p class="first last">Circular velocity at galaxy_cut*length_scale using mass from the given ptypes.</p>
</dd>
</dl>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_enclosed_mass">
<code class="descname">get_enclosed_mass</code><span class="sig-paren">(</span><em>simulation_data_dir</em>, <em>ptype</em>, <em>galaxy_cut</em>, <em>length_scale</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.get_enclosed_mass"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_enclosed_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the mass inside galaxy_cut*length_scale for each Halo halo.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>simulation_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Directory containing the raw particle data.</li>
<li><strong>ptype</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – What particle type to get the mass for.</li>
<li><strong>galaxy_cut</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo within which to get the mass.</li>
<li><strong>length_scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo within which to get the mass.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">mass_inside_all_halos[i] is the mass of particle type ptype inside galaxy_cut*length scale around a galaxy.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">mass_inside_all_halos (np.ndarray)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_mass_radii">
<code class="descname">get_mass_radii</code><span class="sig-paren">(</span><em>mass_fractions</em>, <em>simulation_data_dir</em>, <em>galaxy_cut</em>, <em>length_scale</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.get_mass_radii"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.get_mass_radii" title="Permalink to this definition">¶</a></dt>
<dd><p>Get radii that enclose a fraction (mass_fractions[i]) of a halo’s stellar mass.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mass_fractions</strong> (<em>list of floats</em>) – Relevant mass fractions.</li>
<li><strong>simulation_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Directory containing the raw particle data.</li>
<li><strong>galaxy_cut</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.7)"><em>float</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo to look for stars.</li>
<li><strong>length_scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – galaxy_cut*length_scale defines the radius around the center of the halo to look for stars.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">If M_sum_j = all mass inside galaxy_cut*length_scale for halo j, then mass_radii[i][j] is the radius that
contains a fraction mass_fractions[i] of M_sum_j.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">mass_radii (list of np.ndarrays)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.include_halos_to_mtree_halos">
<code class="descname">include_halos_to_mtree_halos</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.include_halos_to_mtree_halos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.include_halos_to_mtree_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>While most of the halofile data are contained in <a href="#id3"><span class="problematic" id="id4">*</span></a>.AHF_halos files, some quantities are stored in
<a href="#id5"><span class="problematic" id="id6">*</span></a>.AHF_halos files. These are usually computed manually, external to what’s inherent in AHF. This routine adds
on the the information from these files to the loaded merger tree data (which don’t usually include them, because
they’re not inherent to AHF.</p>
<dl class="docutils">
<dt>Modifies:</dt>
<dd><dl class="first last docutils">
<dt>self.mtree_halos (dict of pd.DataFrames) :</dt>
<dd>Adds additional columns contained in <a href="#id7"><span class="problematic" id="id8">*</span></a>.AHF_halos_add files.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_custom_mtree_halos">
<code class="descname">save_custom_mtree_halos</code><span class="sig-paren">(</span><em>snums</em>, <em>halo_ids</em>, <em>metafile_dir</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.save_custom_mtree_halos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_custom_mtree_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>Save a custom merger tree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>snums</strong> (<em>array-like</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – What snapshots to generate the custom merger tree for.
If a single integer, then snums will start at that integer and count backwards by single snapshots for the
length of halo_ids</li>
<li><strong>halo_ids</strong> (<em>array-like</em>) – halo_ids[i] is the AHF_halos halo ID for the merger tree halo at snums[i].</li>
<li><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Directory for the metafile (used to get simulation redshift).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Modifies:</dt>
<dd>self.data_dir/halo_00000_custom.dat (text file) : Saves the custom merger tree at this location.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_halos_add">
<code class="descname">save_halos_add</code><span class="sig-paren">(</span><em>snum, include_analytic_concentration=True, include_mass_radii=True, include_enclosed_mass=True, include_average_quantity_inside_galaxy=False, include_v_circ=True, metafile_dir=None, simulation_data_dir=None, mass_radii_kwargs={'galaxy_cut': 0.15, 'length_scale': 'Rvir', 'mass_fractions': [0.5, 0.75, 0.9]}, enclosed_mass_ptypes=['gas', 'DM', 'lowresDM', 'star'], enclosed_mass_kwargs={'galaxy_cut': 5.0, 'length_scale': 'Rstar0.5'}, average_quantity_data_keys=['Vx', 'Vy', 'Vz'], average_quantity_inside_galaxy_kwargs={'galaxy_cut': 5.0, 'length_scale': 'Rstar0.5', 'ptype': 'star'}, v_circ_kwargs={'galaxy_cut': 5.0, 'length_scale': 'Rstar0.5'}, verbose=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.save_halos_add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_halos_add" title="Permalink to this definition">¶</a></dt>
<dd><p>Save additional columns that would be part of <a href="#id9"><span class="problematic" id="id10">*</span></a>.AHF_halos files, if that didn’t break AHF.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>snum</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Snapshot number to load.</li>
<li><strong>include_analytic_concentration</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Include analytic concentration as one of the columns?</li>
<li><strong>include_mass_radii</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Include radius that include some fraction of a particle’s mass as one of the columns?</li>
<li><strong>include_enclosed_mass</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Include the mass enclosed in some specified radii as one of the columns?</li>
<li><strong>include_average_quantity_inside_galaxy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Include the average value inside each galaxy for the quantities listed in average_quantity_data_keys?</li>
<li><strong>include_v_circ</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Include the circular mass at some specified radii as one of the columns?</li>
<li><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The directory the metafiles (snapshot_times and used_parameters) are stored in.</li>
<li><strong>simulation_data_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Directory containing the simulation data (used for getting the position and masses of the star particles).</li>
<li><strong>mass_radii_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Keyword args for self.get_mass_radii()</li>
<li><strong>enclosed_mass_ptypes</strong> (<em>list of strs</em>) – Particle types to get the mass inside a radii of.</li>
<li><strong>enclosed_mass_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Keyword args for self.get_enclosed_mass()</li>
<li><strong>average_quantity_data_keys</strong> (<em>list of strs</em>) – What data keys (to be passed to a standard ParticleData.get_data() function) to get the average quantity for?</li>
<li><strong>average_quantity_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Keyword args for self.get_average_quantity_inside_galaxy()</li>
<li><strong>v_circ_kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Keyword args for self.get_circular_velocity()</li>
<li><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, print out additional information about how the steps are progressing.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_mtree_halos">
<code class="descname">save_mtree_halos</code><span class="sig-paren">(</span><em>tag</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.save_mtree_halos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_mtree_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>Save loaded mergertree halo files in a csv file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>tag</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – If the previous file was for example ‘/path/to/file/halo_00000.dat’,
the new file will be ‘/path/to/file/halo_00000_{}.dat’.format( tag )</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_multiple_halos_adds">
<code class="descname">save_multiple_halos_adds</code><span class="sig-paren">(</span><em>metafile_dir</em>, <em>snum_start</em>, <em>snum_end</em>, <em>snum_step</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.save_multiple_halos_adds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_multiple_halos_adds" title="Permalink to this definition">¶</a></dt>
<dd><p>Save additional columns that would be part of <a href="#id11"><span class="problematic" id="id12">*</span></a>.AHF_halos files, if that didn’t break AHF.
Do this for every <a href="#id13"><span class="problematic" id="id14">*</span></a>.AHF_halos file in self.data_dir.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The directory the metafiles (snapshot_times and used_parameters) are stored in.</li>
<li><strong>snum_start</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Starting snapshot.</li>
<li><strong>snum_end</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Ending snapshot.</li>
<li><strong>snum_step</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Step between snapshots.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_smooth_mtree_halos">
<code class="descname">save_smooth_mtree_halos</code><span class="sig-paren">(</span><em>metafile_dir, index=None, include_halos_add=True, include_concentration=False, smooth_keys=['Rstar0.5'], **get_mtree_halo_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.save_smooth_mtree_halos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.save_smooth_mtree_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>Load halo files, smooth them, and save as a new file e.g., halo_00000_smooth.dat</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The directory the metafiles (snapshot_times and used_parameters) are stored in.</li>
<li><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – What type of index to use. Defaults to None, which raises an exception. You <em>must</em> choose an
index, to avoid easy mistakes. See get_mtree_halos() for a full description.</li>
<li><strong>include_concentration</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether or not to add an additional column that gives an analytic value for the
halo concentration.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="galaxy_dive.analyze_data.ahf_updater.HaloUpdater.smooth_mtree_halos">
<code class="descname">smooth_mtree_halos</code><span class="sig-paren">(</span><em>metafile_dir</em>, <em>keys_to_smooth=[]</em>, <em>smooth_kwargs={'window': 'flat'</em>, <em>'window_len': 20}</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/galaxy_dive/analyze_data/ahf_updater.html#HaloUpdater.smooth_mtree_halos"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#galaxy_dive.analyze_data.ahf_updater.HaloUpdater.smooth_mtree_halos" title="Permalink to this definition">¶</a></dt>
<dd><p>Make Rvir and Mvir monotonically increasing, to help mitigate artifacts in the Halo-calculated merger tree.
NOTE: This smooths in <em>physical</em> coordinates, so it may not be exactly smooth in comoving coordinates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>metafile_dir</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <p>The directory the snapshot_times are stored in.</p>
<dl class="docutils">
<dt>keys_to_smooth (list of strs) :</dt>
<dd>If given, also smooth the data given by these keys.
This smoothing isn’t done to assume a monotonic increase, but is
a convolve with a moving filter through data_operations.smooth()</dd>
<dt>smooth_kwargs (dict) :</dt>
<dd>Specific arguments that determine exactly how the smoothing is
done, when also smoothing for specific keys.</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Modifies:</dt>
<dd><dl class="first last docutils">
<dt>self.mtree_halos (dict of pd.DataFrames) :</dt>
<dd>Changes self.mtree_halos[halo_id][‘Rvir’] and self.mtree_halos[halo_id][‘Mvir’] to be monotonically increasing.</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/galaxy_dive.analyze_data.ahf_updater.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">galaxy-dive 0.8.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Zachary Hafen.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.
    </div>
  </body>
</html>